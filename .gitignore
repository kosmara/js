/** 
 * @projectDescription  PagesJS is a small JavaSciprt Framework originally built as an experiment in designing single page applications.
 *                      As PagesJS evolved it aimed to solve the common problems associated with writing this new style of application. It became clear early on that PagesJS was well suited for building simple single page applications without the requirement of heavier libraries such as jQuery to perform simple DOM related functions.
 *
 * @author  Christopher D. Langton chris@codewiz.biz
 * @version     1.1
 */
function p(e){if(!document.getElementsByClassName){document.getElementsByClassName=function(e){var t=[];var n=document.getElementsByTagName("*");var r=new RegExp("(^|s)"+e+"(s|$)");for(var i=0;i<n.length;i++){if(r.test(n[i].className)){t.push(n[i])}}return t}}if(typeof Array.prototype.indexOf!=="function"){Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++){if(this[t]===e){return t}}return-1}}this.hash=window.location.hash.substring(2);this.page_title=document.getElementsByTagName("title")[0].innerHTML.replace("<","<").replace(">",">").replace(" & "," & ").substring(0,document.getElementsByTagName("title")[0].innerHTML.replace("<","<").replace(">",">").replace(" & "," & ").indexOf(" |"))||document.getElementsByTagName("title")[0].innerHTML.replace("<","<").replace(">",">").replace(" & "," & ");var t=document.getElementsByTagName("link");for(var n=0;n<t.length;n++){if(t[n].getAttribute("rel")==="canonical"){this.canonical=t[n].href.substring(0,t[n].href.indexOf("#!"))||t[n].href}}var r={Library:"PagesJS",Version:1.1,Author:"Christopher D. Langton",Website:"http://chrisdlangton.com",Created:"2013-02-03",Updated:"2013-02-22"};if(e){if(window===this){return new p(e)}if(e.charAt(0)==="#"){e=e.substring(1);this.id=e;if(typeof document.getElementById(e)!=="undefined"&&document.getElementById(e)!==null){this.ele=document.getElementById(e);return this}else{console.log("PagesJS: unknown element");return false}}else if(e.charAt(0)==="."){e=e.substring(1);this.id=e;if(typeof document.getElementsByClassName(e)!=="undefined"&&document.getElementsByClassName(e)!==null){this.ele=document.getElementsByClassName(e);return this}else{console.log("PagesJS: unknown element");return false}}else if(e.charAt(0)==="_"){e=e.substring(1);this.id=e;var i=document.getElementsByTagName("*");for(var n=0;n<i.length;n++){if(i[n].getAttribute("page")){if(i[n].getAttribute("page")===e){this.ele=i[n];n=i.length;return this}}}}else if(e==="body"){return this}else{console.log("PagesJS: invalid selector");return false}}else{return r}}p.prototype={init:function(){if(typeof window.meta!=="undefined"){return}window.meta={title:document.getElementsByTagName("title")[0].innerHTML.replace("<","<").replace(">",">").replace(" & "," & ")};if("onhashchange"in window){window.onhashchange=function(){var e=window.location.hash.substring(2);if(e.length>1){p("_"+e).exist().nav()}}}else{var e=window.location.hash;window.setInterval(function(){if(window.location.hash!==e){var t=window.location.hash.substring(2);if(t.length>1){p("_"+t).exist().nav()}}},500)}if(this.hash.length>1){p("_"+this.hash).exist().nav()}},forEach:function(e,t){for(var n=0,r=this.ele.length;n<r;++n){e.call(t,this.ele[n],n,this.ele)}},hide:function(){if(typeof this.ele!=="undefined"&&this.ele!==null){if(typeof this.ele[1]!=="undefined"&&this.ele[1]!==null){for(var e=0,t=this.ele.length;e<t;++e){this.ele[e].style.display="none"}return this}else{this.ele.style.display="none";return this}}else{return false}},show:function(){if(typeof this.ele!=="undefined"&&this.ele!==null){if(typeof this.ele[1]!=="undefined"&&this.ele[1]!==null){for(var e=0,t=this.ele.length;e<t;++e){this.ele[e].style.display="inherit"}return this}else{this.ele.style.display="inherit";return this}}else{return false}},toggle:function(){if(typeof this.ele!=="undefined"&&this.ele!==null){if(typeof this.ele[1]!=="undefined"&&this.ele[1]!==null){for(var e=0,t=this.ele.length;e<t;++e){if(this.ele[e].style.display!=="none"){this.ele[e].style.display="none"}else{this.ele[e].style.display="inherit"}}return this}else{if(this.ele.style.display!=="none"){this.ele.style.display="none"}else{this.ele.style.display="inherit"}return this}}else{return false}},trim:function(){if(typeof this.ele!=="undefined"&&this.ele!==null){if(typeof this.ele[1]!=="undefined"&&this.ele[1]!==null){console.log("PagesJS: method available for unique selectors only.");return false}if(typeof this.ele.value==="string"){return this.ele.value.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}else if(typeof this.ele.innerHTML==="string"){return this.ele.innerHTML.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}else{return false}}else{return false}},ltrim:function(){if(typeof this.ele!=="undefined"&&this.ele!==null){if(typeof this.ele[1]!=="undefined"&&this.ele[1]!==null){console.log("PagesJS: method available for unique selectors only.");return false}if(typeof this.ele.value==="string"){return this.ele.value.replace(/\s+$/,"")}else if(typeof this.ele.innerHTML==="string"){return this.ele.innerHTML.replace(/\s+$/,"")}else{return false}}else{return false}},rtrim:function(){if(typeof this.ele!=="undefined"&&this.ele!==null){if(typeof this.ele[1]!=="undefined"&&this.ele[1]!==null){console.log("PagesJS: method available for unique selectors only.");return false}if(typeof this.ele.value==="string"){return this.ele.value.replace(/^\s+/,"")}else if(typeof this.ele.innerHTML==="string"){return this.ele.innerHTML.replace(/^\s+/,"")}else{return false}}else{return false}},clear:function(e,t){if(typeof this.ele!=="undefined"&&this.ele!==null){if(typeof this.ele[1]!=="undefined"&&this.ele[1]!==null){console.log("PagesJS: method available for unique selectors only.");return false}if(typeof this.ele.value==="string"){var n=this.ele.value.indexOf(e);var r=this.ele.value.indexOf(t);return this.ele.value.slice(0,n)+this.ele.value.slice(r+1)}else if(typeof this.ele.innerHTML==="string"){var n=this.ele.innerHTML.indexOf(e);var r=this.ele.innerHTML.indexOf(t);return this.ele.innerHTML.slice(0,n)+this.ele.innerHTML.slice(r+1)}else{return false}}else{return false}},contains:function(e){if(typeof this.ele!=="undefined"&&this.ele!==null){if(typeof this.ele[1]!=="undefined"&&this.ele[1]!==null){console.log("PagesJS: method available for unique selectors only.");return false}if(typeof this.ele.value==="string"){return this.ele.value.indexOf(e)>-1}else if(typeof this.ele.innerHTML==="string"){return this.ele.innerHTML.indexOf(e)>-1}else{return false}}else{return false}},reverse:function(){if(typeof this.ele!=="undefined"&&this.ele!==null){if(typeof this.ele[1]!=="undefined"&&this.ele[1]!==null){console.log("PagesJS: method available for unique selectors only.");return false}if(typeof this.ele.value==="string"){return this.ele.value.split("").reverse().join("")}else if(typeof this.ele.innerHTML==="string"){return this.ele.innerHTML.split("").reverse().join("")}else{return false}}else{return false}},camelCase:function(){if(typeof this.ele!=="undefined"&&this.ele!==null){if(typeof this.ele[1]!=="undefined"&&this.ele[1]!==null){console.log("PagesJS: method available for unique selectors only.");return false}if(typeof this.ele.value==="string"){return this.ele.value.replace(/\W+(.)/g,function(e,t){return t.toUpperCase()})}else if(typeof this.ele.innerHTML==="string"){return this.ele.innerHTML.replace(/\W+(.)/g,function(e,t){return t.toUpperCase()})}else{return false}}else{return false}},inverse:function(){if(typeof this.ele!=="undefined"&&this.ele!==null){if(typeof this.ele[1]!=="undefined"&&this.ele[1]!==null){console.log("PagesJS: method available for unique selectors only.");return false}if(typeof this.ele.value==="string"){return this.ele.value.replace(/([a-z]+)|([A-Z]+)/g,function(e,t,n){return t?e.toUpperCase():e.toLowerCase()})}else if(typeof this.ele.innerHTML==="string"){return this.ele.innerHTML.replace(/([a-z]+)|([A-Z]+)/g,function(e,t,n){return t?e.toUpperCase():e.toLowerCase()})}else{return false}}else{return false}},capitalize:function(e){if(typeof e==="undefined"&&e===null){var t=false}else{var t=e}if(typeof this.ele!=="undefined"&&this.ele!==null){if(typeof this.ele[1]!=="undefined"&&this.ele[1]!==null){console.log("PagesJS: method available for unique selectors only.");return false}if(typeof this.ele.value==="string"){return t?this.ele.value.replace(/\w+/g,function(e){return e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()}):this.ele.value.charAt(0).toUpperCase()+this.ele.value.substring(1).toLowerCase()}else if(typeof this.ele.innerHTML==="string"){return t?this.ele.innerHTML.replace(/\w+/g,function(e){return e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()}):this.ele.innerHTML.charAt(0).toUpperCase()+this.ele.innerHTML.substring(1).toLowerCase()}else{return false}}else{return false}},disable:function(){if(typeof this.ele!=="undefined"&&this.ele!==null){if(typeof this.ele[1]!=="undefined"&&this.ele[1]!==null){console.log("PagesJS: method available for unique selectors only.");return false}if(this.ele.tagName&&this.ele.tagName.toLowerCase()==="textarea"||this.ele.tagName&&this.ele.tagName.toLowerCase()==="input"&&this.ele.type.toLowerCase()==="text"){this.ele.disabled=true;return this}else{var e=this.ele.getElementsByTagName("input");var t=0;for(t=0;t<e.length;t++){e[t].disabled=true}var n=this.ele.getElementsByTagName("select");for(t=0;t<n.length;t++){n[t].disabled=true}var r=this.ele.getElementsByTagName("textarea");for(t=0;t<r.length;t++){r[t].disabled=true}var i=this.ele.getElementsByTagName("button");for(t=0;t<i.length;t++){i[t].disabled=true}return this}}else{return false}},enable:function(){if(typeof this.ele!=="undefined"&&this.ele!==null){if(typeof this.ele[1]!=="undefined"&&this.ele[1]!==null){console.log("PagesJS: method available for unique selectors only.");return false}if(this.ele.tagName&&this.ele.tagName.toLowerCase()==="textarea"||this.ele.tagName&&this.ele.tagName.toLowerCase()==="input"&&this.ele.type.toLowerCase()==="text"){this.ele.disabled=false;return this}else{var e=this.ele.getElementsByTagName("input");var t=0;for(t=0;t<e.length;t++){e[t].disabled=false}var n=this.ele.getElementsByTagName("select");for(t=0;t<n.length;t++){n[t].disabled=false}var r=this.ele.getElementsByTagName("textarea");for(t=0;t<r.length;t++){r[t].disabled=false}var i=this.ele.getElementsByTagName("button");for(t=0;t<i.length;t++){i[t].disabled=false}return this}}else{return false}},stringify:function(e){if(typeof this.ele[1]!=="undefined"&&this.ele[1]!==null){console.log("PagesJS: method available for unique selectors only.");return false}if(e&&typeof e==="object"){if(window.JSON&&window.JSON.stringify){if(this.ele.tagName&&this.ele.tagName.toLowerCase()==="textarea"||this.ele.tagName&&this.ele.tagName.toLowerCase()==="input"&&this.ele.type.toLowerCase()==="text"){this.ele.value=window.JSON.stringify(e,function(e,t){if(typeof t==="number"&&!isFinite(t)){return String(t)}return t})}else{this.ele.innerHTML=windowJSON.stringify(e,function(e,t){if(typeof t==="number"&&!isFinite(t)){return String(t)}return t})}return this}else{console.log("PagesJS: browser doesnt support json natively");return false}}else{console.log("PagesJS: stringify accepts an object");return false}},parse:function(){if(typeof this.ele[1]!=="undefined"&&this.ele[1]!==null){console.log("PagesJS: method available for unique selectors only.");return false}var e="";if(this.ele.tagName&&this.ele.tagName.toLowerCase()==="textarea"||this.ele.tagName&&this.ele.tagName.toLowerCase()==="input"&&this.ele.type.toLowerCase()==="text"){if(typeof this.ele.value==="string"&&this.ele.value!==null){e=this.ele.value.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(window.JSON&&window.JSON.parse){return window.JSON.parse(e)}else{console.log("PagesJS: browser doesnt support json natively");return false}}else{console.log("PagesJS: parse accepts a string");return false}}else{if(typeof this.ele.innerHTML==="string"&&this.ele.innerHTML!==null){e=this.ele.innerHTML.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(window.JSON&&window.JSON.parse){return window.JSON.parse(e)}else{console.log("PagesJS: browser doesnt support json natively");return false}}}},html:function(e){if(typeof this.ele!=="undefined"&&this.ele!==null){if(typeof this.ele[1]!=="undefined"&&this.ele[1]!==null){console.log("PagesJS: method available for unique selectors only.");return false}if(typeof e==="undefined"){return this.ele.innerHTML}else{this.ele.innerHTML=e;return this}}else{return false}},val:function(e){if(typeof this.ele!=="undefined"&&this.ele!==null){if(typeof this.ele[1]!=="undefined"&&this.ele[1]!==null){console.log("PagesJS: method available for unique selectors only.");return false}if(this.ele.tagName&&this.ele.tagName.toLowerCase()==="input"){if(typeof e==="undefined"){return this.ele.value}else{this.ele.value=e;return this}}else{console.log("PagesJS: method available for input selectors only.");return false}}else{return false}},style:function(e,t){if(typeof this.ele!=="undefined"&&this.ele!==null){if(typeof this.ele[1]!=="undefined"&&this.ele[1]!==null){for(var n=0,r=this.ele.length;n<r;++n){this.ele[n].style[e]=t}return this}else{this.ele.style[e]=t;return this}}else{return false}},remove:function(){if(typeof this.ele!=="undefined"&&this.ele!==null){var e;if(typeof this.ele[1]!=="undefined"&&this.ele[1]!==null){console.log("PagesJS: method available for unique selectors only.");return false}(e=this.ele).parentNode.removeChild(e);return this}else{return false}},empty:function(){if(typeof this.ele!=="undefined"&&this.ele!==null){if(typeof this.ele[1]!=="undefined"&&this.ele[1]!==null){for(var e=0,t=this.ele.length;e<t;++e){this.ele[e].innerHTML=""}return this}else{this.ele.innerHTML="";return this}}else{return false}},addClass:function(e){if(typeof this.ele!=="undefined"&&this.ele!==null){var t="";var n,r=0;if(typeof e!=="string"){for(r=0;r<e.length;r++){t+=" "+e[r]}}else{t=" "+e}if(typeof this.ele[1]!=="undefined"&&this.ele[1]!==null){for(r=0,n=this.ele.length;r<n;++r){this.ele[r].className+=t}return this}else{this.ele.className+=t;return this}}else{return false}},removeClass:function(e){if(typeof this.ele!=="undefined"&&this.ele!==null){var t,n=0;if(typeof e==="undefined"||this.ele===null){if(typeof this.ele[1]!=="undefined"&&this.ele[1]!==null){for(n=0,t=this.ele.length;n<t;++n){this.ele[n].className=""}return this}else{this.ele.className="";return this}}else{if(typeof this.ele[1]!=="undefined"&&this.ele[1]!==null){for(n=0,t=this.ele.length;n<t;++n){while((" "+this.ele[n].className+" ").indexOf(" "+e+" ")>-1){this.ele[n].className=this.ele[n].className.replace(new RegExp("\\b"+e+"\\b"),"")}}return this}else{while((" "+this.ele.className+" ").indexOf(" "+e+" ")>-1){this.ele.className=this.ele.className.replace(new RegExp("\\b"+e+"\\b"),"")}return this}}}else{return false}},hasClass:function(e){if(typeof this.ele!=="undefined"&&this.ele!==null){var t=true,n=this.ele.className.split(" ");e=e.split(" ");for(var r=0;r<e.length;r++)if(n.indexOf(e[r])===-1)t=false;return t}else{return false}},attr:function(e,t){if(typeof this.ele!=="undefined"&&this.ele!==null){if(typeof this.ele[1]!=="undefined"&&this.ele[1]!==null){for(var n=0,r=this.ele.length;n<r;++n){this.ele[n].setAttribute(e,t)}return this}else{this.ele.setAttribute(e,t);return this}}else{return false}},append:function(e){if(typeof this.ele!=="undefined"&&this.ele!==null&&typeof e==="string"){if(typeof this.ele[1]!=="undefined"&&this.ele[1]!==null){console.log("PagesJS: method available for unique selectors only.");return false}this.ele.innerHTML=this.ele.innerHTML+e;return this}else{return false}},prepend:function(e){if(typeof this.ele!=="undefined"&&this.ele!==null&&typeof e==="string"){if(typeof this.ele[1]!=="undefined"&&this.ele[1]!==null){console.log("PagesJS: method available for unique selectors only.");return false}this.ele.innerHTML=e+this.ele.innerHTML;return this}else{return false}},goTo:function(){this.ele.scrollIntoView(true);return this},addPage:function(e){if(typeof this.ele!=="undefined"&&this.ele!==null){if(this.ele.hasAttribute("page")){console.log("PagesJS: page already exists as '"+this.ele.getAttribute("page")+"'");return false}else{this.ele.setAttribute("page",e);return this}}else{console.log("PagesJS: invalid selector");return false}},exist:function(e){if(typeof this.ele!=="undefined"&&this.ele!==null&&typeof e!=="undefined"&&e!==null){if(this.ele.hasAttribute("page")){return this.ele.getAttribute("page")===e?true:false}else{return false}}else if(typeof this.ele!=="undefined"&&this.ele!==null){if(this.ele.hasAttribute("page")){return this.ele.getAttribute("page")===this.id?this:false}else{return false}}},title:function(e){if(typeof this.ele!=="undefined"&&this.ele!==null&&this.ele.hasAttribute("page")){if(typeof e==="undefined"){return this.ele.getAttribute("page-title")}else{this.ele.setAttribute("page-title",e);return this}}else{console.log("PagesJS: pageTitle method only available for page selector");return false}},change:function(e){var t=this;if(history&&history.pushState){window.addEventListener("popstate",function(n){if(window.location.hash.substring(2)===t.id){e({page:t.id,title:document.getElementsByTagName("title")[0].innerHTML,node:t.ele})}})}else{window.addEventListener("hashchange",function(n){if(window.location.hash.substring(2)===t.id){e({page:t.id,title:document.getElementsByTagName("title")[0].innerHTML,node:t.ele})}})}},nav:function(e,t){if(typeof this.ele!=="undefined"&&this.ele!==null&&this.ele.hasAttribute("page")){var n=document.getElementsByTagName("*");var r=0;for(r=0;r<n.length;r++){if(n[r].getAttribute("page")){if(n[r].getAttribute("page")===this.id){n[r].style.display="inherit"}else{n[r].style.display="none"}}}if(window.history.replaceState){if(typeof e==="object"&&typeof e.title!=="undefined"){document.getElementsByTagName("title")[0].innerHTML=e.title;window.history.pushState({page:this.id},e.title,this.canonical+"#!"+this.id)}else{if(this.ele.hasAttribute("page-title")){document.getElementsByTagName("title")[0].innerHTML=this.ele.getAttribute("page-title");window.history.pushState({page:this.id},this.ele.getAttribute("page-title"),this.canonical+"#!"+this.id)}else{if(typeof window.meta==="object"&&typeof window.meta.title!=="undefined"){document.getElementsByTagName("title")[0].innerHTML=window.meta.title+" | "+this.id;window.history.pushState({page:this.id},window.meta.title+" | "+this.id,this.canonical+"#!"+this.id)}else{document.getElementsByTagName("title")[0].innerHTML=this.page_title+" | "+this.id;window.history.pushState({page:this.id},this.page_title+" | "+this.id,this.canonical+"#!"+this.id)}}}}else{if(typeof e==="object"&&typeof e.title!=="undefined"){document.getElementsByTagName("title")[0].innerHTML=e.title}else{if(this.ele.hasAttribute("page-title")){document.getElementsByTagName("title")[0].innerHTML=this.ele.getAttribute("page-title")}else{if(typeof window.meta==="object"&&typeof window.meta.title!=="undefined"){document.getElementsByTagName("title")[0].innerHTML=window.meta.title+" | "+this.id}else{document.getElementsByTagName("title")[0].innerHTML=this.page_title+" | "+this.id}}}}var i=document.getElementsByTagName("link");for(r=0;r<i.length;r++){if(i[r].getAttribute("rel")==="canonical"){i[r].href=this.canonical+"#!"+this.id}}if(typeof window._gaq!=="undefined"){window._gaq.push(["_trackPageview","/#!"+this.id])}if(typeof window.reinvigorate!=="undefined"&&typeof window.reinvigorate.ajax_track!=="undefined"){reinvigorate.ajax_track(window.location)}if(typeof t!=="undefined"){var s=this;return t({page:s.id,title:document.getElementsByTagName("title")[0].innerHTML,node:s.ele})}else{return this}}else{console.log("PagesJS: nav method only available for page selector");return false}},removePage:function(){if(typeof this.ele!=="undefined"&&this.ele!==null&&this.ele.hasAttribute("page")){this.ele.removeAttribute("page");return this}else{console.log("PagesJS: invalid selector or no page attribute");return false}}};
